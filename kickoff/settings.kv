#:import Factory kivy.factory.Factory
<InfoPopup>:
    canvas.before:
        Color:
            rgba:  0, 1, 0, .2
        Rectangle:
            pos: self.pos
            size: self.size
    title: 'Information'
    size_hint: 0.4, 0.4 
    id: info_popup
    BoxLayout
        orientation: 'vertical'        
        Label    
            text: root.info
        Button:
            text: 'Ok'
            size_hint: 1.0, 0.2
            on_press: info_popup.on_press_dismiss()
<MySettingButton@Button>:
    size_hint: [1, .1]  
    color: [1, 1, 1, 1]    
    background_color: [0, 1, 0, .6]   
    font_size: 16  
<MyScreen@Screen>:
    canvas.before:
        Color:
            rgba: 0, 1, 0, .2
        Rectangle:            
            size: self.size
<MyBoxLayout@BoxLayout>:
    orientation: 'horizontal'
    # size_hint: [1, .2]
    size_hint_y: None
    height: '39dp'
    padding: 70, 8, 60, 8
<MyAdvice@BoxLayout>:
    orientation: 'horizontal'  
    size_hint_y: None
    height: '29dp'       
    advice: 'An advice'
    padding: 70, 0, 60, 0
    Label:        
        text_size: self.size
        haling: 'left'
        valing: 'middle'
        font_size: 12
        text: root.advice   
<MyTitle@BoxLayout>:
    orientation: 'horizontal'  
    size_hint: [1, .4]   
    # height: '26dp'      
    canvas.before:
        Color:
            rgba: 0, 1, 0, .1
        Rectangle:
            pos: self.pos
            size: self.size
    title: 'Title'    
    padding: 70, 8, 60, 8
    Label:        
        text_size: self.size
        haling: 'left'
        valing: 'middle'
        font_size: 21
        text: root.title
<MySubtitle@BoxLayout>:
    orientation: 'horizontal'
    # size_hint: [1, .2]  
    size_hint_y: None
    height: '52dp'
    subtitle: 'Subtitle'
    padding: 70, 0, 60, 2
    Label:        
        text_size: self.size
        halign: 'left'
        valing: 'middle'
        font_size: 18  
        text: root.subtitle
<MyLabel@Label>:
    text_size: self.size
    valign: 'middle'
    halign: 'left'
<MyTextInput@TextInput>
    size_hint_y: None
    height: '29dp'
    pos_hint: {'top': 0.9}    
    multiline: False
<MyPassword@TextInput>
    password: True
    size_hint_y: None
    height: '29dp'
    pos_hint: {'top': 0.9}    
    multiline: False
    
# settings GUI.
<Settings>:    
    BoxLayout:        
        orientation: 'horizontal'
        canvas.before:
            Color:
                rgb: 0, 0, 0
            Rectangle:
                size: self.size
        BoxLayout:
            orientation: 'vertical'
            size_hint: [.3, 1]
            # size: '150dp', root.height
            # padding: 0, 0, 1, 310
            MySettingButton:            
                text: 'Localization'
                on_release:
                    screen.transition = Factory.get('FadeTransition')()
                    # screen.transition.direction = 'up'  
                    screen.current = 'localization'                                      
            MySettingButton:            
                text: 'User settings'
                on_release: screen.current = 'user'
            MySettingButton:            
                text: 'Installation source'
                on_release: screen.current = 'source'
            MySettingButton:            
                text: 'Partitions'
                on_release: screen.current = 'partition'
            MySettingButton:            
                text: 'Network'
                on_release: screen.current = 'network'
            MySettingButton:            
                text: 'Others'
                on_release: screen.current = 'others'
            MySettingButton:            
                text: 'Save'
                on_release: 
                    root.validate_forms()                    
            MySettingButton:            
                text: 'Return'
                on_release: 
                    root.manager.current = 'main' 
                    # root.load_file()                   
        # Creating every screen
        ScreenManager:
            id: screen
            
            MyScreen:
                name: 'user' 

                BoxLayout: 
                    orientation: 'vertical' 
                    size_hint: [1, 1]
                   
                    MyTitle:  
                        title: 'User settings' 
                    MySubtitle:
                        subtitle: 'Root settings'

                    MyBoxLayout:                        
                        MyLabel:
                            text: 'Enable the root acount:'
                        Switch: 
                            id: sr1
                            on_active: root.active_root(self, self.active)
                    
                    MyBoxLayout:                        
                        MyLabel:
                            text: 'Root password: *' 
                        MyPassword:                            
                            id: pr1
                            disabled: root.root_pass_state

                    MyBoxLayout:          
                        MyLabel:
                            text: 'Confirm root password: *' 
                        MyPassword:
                            id: pr2
                            disabled: root.root_pass_conf_state
                            on_focus: root.check_root_pass(self, self.focus)

                    MySubtitle:
                        subtitle: 'Initial user'

                    MyBoxLayout:                        
                        MyLabel:
                            text: 'Username: *' 
                        MyTextInput:
                            id: us1
                           
                    MyBoxLayout:          
                        MyLabel:
                            text: 'Password: *' 
                        MyPassword:
                            id: us2

                    MyBoxLayout:          
                        MyLabel:
                            text: 'Confirm password: *' 
                        MyPassword:
                            id: us3

                    MyBoxLayout:                        
                        MyLabel:
                            text: 'Home directory:' 
                        MyTextInput:
                            id: us4

                    MyBoxLayout:                        
                        MyLabel:
                            text: 'Shell:' 
                        MyTextInput:
                            id: us5
                            
                    MyAdvice
                        advice: '* Required fields.'
                    Widget:
                    
                  
            MyScreen:
                name: 'localization'  
                Label:
                    text: 'localization' 
                     
            MyScreen:
                name: 'source'
             
                Label:
                    text: 'source'
            MyScreen:
                name: 'partition'
               
                Label:
                    text: 'partition'
            MyScreen:
                name: 'network'
                
                Label:
                    text: 'network'
            MyScreen:
                name: 'others'
            
                Label:
                    text: 'others'

                